{"uid":"6b610875fe280e16","name":"positive_discount_for_unauthorized_customer_purchase_amount_3500_to_4999rub_smoke","fullName":"tests.test_products_on_sale.test_products_on_sale_page.TestProductsOnSalePage#test_positive_discount_for_unauthorized_customer_purchase_amount_3500_to_4999rub_smoke","historyId":"20a229ea56dbfac299ce8155fae6537d","time":{"start":1702171353938,"stop":1702171363433,"duration":9495},"status":"failed","statusMessage":"AssertionError: ОР: Скидка за объем = 61.39, ФР: скидка = 61.4\nassert 61.4 == 61.39\n +  where 61.39 = round((4093.0 * 0.015), 2)","statusTrace":"self = <test_products_on_sale_page.TestProductsOnSalePage object at 0x7f481da29010>\nlink = 'https://stroyrem-nn.ru/catalog/shlifovalnye-mashiny'\nproduct_page_open = <pages.products_on_sale_page.ProductsOnSale object at 0x7f481e968550>\n\n    @allure.title(\"positive_discount_for_unauthorized_customer_purchase_amount_3500_to_4999rub_smoke\")\n    @pytest.mark.parametrize('link', [f\"{MAIN_PAGE_PROD_URL}{SHLIFOVALNYE_MASHINY_PAGE_URL}\",\n                                      f\"{MAIN_PAGE_STAGE_URL}{SHLIFOVALNYE_MASHINY_PAGE_URL}\"])\n    @pytest.mark.smoke_test\n    def test_positive_discount_for_unauthorized_customer_purchase_amount_3500_to_4999rub_smoke(\n            self, link, product_page_open):\n        product_page_open.get_field_price_first().send_keys(3500)\n        product_page_open.get_field_price_last().send_keys(4999)\n        time.sleep(1)\n        product_page_open.get_in_stock_products_link().click()\n        time.sleep(5)\n        price = (float(product_page_open.get_pc_price().text[:-2].replace(' ', '')))\n        product_page_open.get_add_to_cart_btn().click()\n        product_page_open.get_header_cart_link_active().click()\n        total = (float(product_page_open.get_total_current_price().text[:-2].replace(' ', '')))\n        cart_total = (float(product_page_open.get_cart_total().text[:-2].replace(' ', '')))\n        discount = float(product_page_open.get_cart_discount().text[:-2].replace(' ', ''))\n        assert total == price - round(price * 0.015, 2) == cart_total, \\\n            f\"ОР: Суммы равны, ФР: Cтоимость товара в каталоге: {price} в корзине: {cart_total} и со скидкой:{total}\"\n>       assert discount == round(price * 0.015, 2), \\\n            f\"ОР: Скидка за объем = {round(price * 0.015, 2)}, ФР: скидка = {discount}\"\nE       AssertionError: ОР: Скидка за объем = 61.39, ФР: скидка = 61.4\nE       assert 61.4 == 61.39\nE        +  where 61.39 = round((4093.0 * 0.015), 2)\n\ntests/test_products_on_sale/test_products_on_sale_page.py:333: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1702170525504,"stop":1702170525573,"duration":69},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false},{"name":"clear_allure_results_folder","time":{"start":1702170525573,"stop":1702170525573,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false},{"name":"driver","time":{"start":1702171346553,"stop":1702171347294,"duration":741},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false},{"name":"product_page_open","time":{"start":1702171347294,"stop":1702171353938,"duration":6644},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false},{"name":"setup","time":{"start":1702171347294,"stop":1702171347294,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: ОР: Скидка за объем = 61.39, ФР: скидка = 61.4\nassert 61.4 == 61.39\n +  where 61.39 = round((4093.0 * 0.015), 2)","statusTrace":"self = <test_products_on_sale_page.TestProductsOnSalePage object at 0x7f481da29010>\nlink = 'https://stroyrem-nn.ru/catalog/shlifovalnye-mashiny'\nproduct_page_open = <pages.products_on_sale_page.ProductsOnSale object at 0x7f481e968550>\n\n    @allure.title(\"positive_discount_for_unauthorized_customer_purchase_amount_3500_to_4999rub_smoke\")\n    @pytest.mark.parametrize('link', [f\"{MAIN_PAGE_PROD_URL}{SHLIFOVALNYE_MASHINY_PAGE_URL}\",\n                                      f\"{MAIN_PAGE_STAGE_URL}{SHLIFOVALNYE_MASHINY_PAGE_URL}\"])\n    @pytest.mark.smoke_test\n    def test_positive_discount_for_unauthorized_customer_purchase_amount_3500_to_4999rub_smoke(\n            self, link, product_page_open):\n        product_page_open.get_field_price_first().send_keys(3500)\n        product_page_open.get_field_price_last().send_keys(4999)\n        time.sleep(1)\n        product_page_open.get_in_stock_products_link().click()\n        time.sleep(5)\n        price = (float(product_page_open.get_pc_price().text[:-2].replace(' ', '')))\n        product_page_open.get_add_to_cart_btn().click()\n        product_page_open.get_header_cart_link_active().click()\n        total = (float(product_page_open.get_total_current_price().text[:-2].replace(' ', '')))\n        cart_total = (float(product_page_open.get_cart_total().text[:-2].replace(' ', '')))\n        discount = float(product_page_open.get_cart_discount().text[:-2].replace(' ', ''))\n        assert total == price - round(price * 0.015, 2) == cart_total, \\\n            f\"ОР: Суммы равны, ФР: Cтоимость товара в каталоге: {price} в корзине: {cart_total} и со скидкой:{total}\"\n>       assert discount == round(price * 0.015, 2), \\\n            f\"ОР: Скидка за объем = {round(price * 0.015, 2)}, ФР: скидка = {discount}\"\nE       AssertionError: ОР: Скидка за объем = 61.39, ФР: скидка = 61.4\nE       assert 61.4 == 61.39\nE        +  where 61.39 = round((4093.0 * 0.015), 2)\n\ntests/test_products_on_sale/test_products_on_sale_page.py:333: AssertionError","steps":[{"name":"Проверяем видимость поля 'ЦЕНА от'","time":{"start":1702171353939,"stop":1702171353970,"duration":31},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false},{"name":"Проверяем видимость поля 'ЦЕНА до'","time":{"start":1702171354033,"stop":1702171354064,"duration":31},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false},{"name":"Проверяем кликабельность кнопки 'На складе'","time":{"start":1702171355105,"stop":1702171355146,"duration":41},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false},{"name":"Проверяем видимость цены товара","time":{"start":1702171360181,"stop":1702171360218,"duration":37},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false},{"name":"Проверяем кликабельность кнопки 'В корзину'","time":{"start":1702171360228,"stop":1702171360272,"duration":44},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false},{"name":"Проверяем кликабельность кнопки 'Корзина'","time":{"start":1702171360302,"stop":1702171360642,"duration":340},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false},{"name":"Проверяем видимость суммы Товара в корзине ","time":{"start":1702171363281,"stop":1702171363391,"duration":110},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false},{"name":"Проверяем видимость значения поля 'Товары на сумму'","time":{"start":1702171363406,"stop":1702171363413,"duration":7},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false},{"name":"Проверяем видимость значения поля 'Скидка за объём'","time":{"start":1702171363419,"stop":1702171363426,"duration":7},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false}],"attachments":[{"uid":"425cd8f27f129829","name":"Screenshot","source":"425cd8f27f129829.png","type":"image/png","size":82883},{"uid":"4b9d0e0b4cfcac28","name":"HTML source","source":"4b9d0e0b4cfcac28.html","type":"text/html","size":496431}],"parameters":[],"stepsCount":9,"attachmentsCount":2,"hasContent":true,"attachmentStep":false,"shouldDisplayMessage":true},"afterStages":[{"name":"setup::0","time":{"start":1702171363586,"stop":1702171363586,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false},{"name":"driver::0","time":{"start":1702171363586,"stop":1702171363660,"duration":74},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false}],"labels":[{"name":"epic","value":"Products On SalePage"},{"name":"tag","value":"smoke_test"},{"name":"parentSuite","value":"tests.test_products_on_sale"},{"name":"suite","value":"test_products_on_sale_page"},{"name":"subSuite","value":"TestProductsOnSalePage"},{"name":"host","value":"cfa492c50b7b"},{"name":"thread","value":"1-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_products_on_sale.test_products_on_sale_page"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"link","value":"'https://stroyrem-nn.ru/catalog/shlifovalnye-mashiny'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":3,"broken":2,"skipped":0,"passed":97,"unknown":0,"total":102},"items":[{"uid":"1ea1cebd32603f41","reportUrl":"https://zaelcovsky.github.io/StroyremAutomation/165//#testresult/1ea1cebd32603f41","status":"failed","statusDetails":"AssertionError: ОР: Скидка за объем = 61.39, ФР: скидка = 61.4\nassert 61.4 == 61.39\n +  where 61.39 = round((4093.0 * 0.015), 2)","time":{"start":1702084617361,"stop":1702084626608,"duration":9247}},{"uid":"f4cceb3b1e271edb","reportUrl":"https://zaelcovsky.github.io/StroyremAutomation/164//#testresult/f4cceb3b1e271edb","status":"failed","statusDetails":"AssertionError: ОР: Скидка за объем = 61.39, ФР: скидка = 61.4\nassert 61.4 == 61.39\n +  where 61.39 = round((4093.0 * 0.015), 2)","time":{"start":1701998500793,"stop":1701998511262,"duration":10469}},{"uid":"1936906a621c7af3","reportUrl":"https://zaelcovsky.github.io/StroyremAutomation/163//#testresult/1936906a621c7af3","status":"passed","time":{"start":1701912049751,"stop":1701912059859,"duration":10108}},{"uid":"5275402549ec63d4","reportUrl":"https://zaelcovsky.github.io/StroyremAutomation/162//#testresult/5275402549ec63d4","status":"passed","time":{"start":1701825682721,"stop":1701825693302,"duration":10581}},{"uid":"b57852d96bfb9270","reportUrl":"https://zaelcovsky.github.io/StroyremAutomation/161//#testresult/b57852d96bfb9270","status":"passed","time":{"start":1701739134184,"stop":1701739143751,"duration":9567}},{"uid":"814f86aed152793","reportUrl":"https://zaelcovsky.github.io/StroyremAutomation/160//#testresult/814f86aed152793","status":"passed","time":{"start":1701652950360,"stop":1701652960364,"duration":10004}},{"uid":"b1fa0cd1aeab6237","reportUrl":"https://zaelcovsky.github.io/StroyremAutomation/159//#testresult/b1fa0cd1aeab6237","status":"passed","time":{"start":1701566660679,"stop":1701566670393,"duration":9714}},{"uid":"51222b3fc16874ac","reportUrl":"https://zaelcovsky.github.io/StroyremAutomation/158//#testresult/51222b3fc16874ac","status":"passed","time":{"start":1701479927686,"stop":1701479937584,"duration":9898}},{"uid":"26a86557885b00cb","reportUrl":"https://zaelcovsky.github.io/StroyremAutomation/157//#testresult/26a86557885b00cb","status":"passed","time":{"start":1701394108589,"stop":1701394119075,"duration":10486}},{"uid":"59cfa915e8301dac","reportUrl":"https://zaelcovsky.github.io/StroyremAutomation/156//#testresult/59cfa915e8301dac","status":"passed","time":{"start":1701307199219,"stop":1701307209024,"duration":9805}},{"uid":"3c9fb334599e8d49","reportUrl":"https://zaelcovsky.github.io/StroyremAutomation/155//#testresult/3c9fb334599e8d49","status":"passed","time":{"start":1701220806142,"stop":1701220815582,"duration":9440}},{"uid":"bb9752b9cd1c0d99","reportUrl":"https://zaelcovsky.github.io/StroyremAutomation/154//#testresult/bb9752b9cd1c0d99","status":"passed","time":{"start":1701134410067,"stop":1701134419916,"duration":9849}},{"uid":"668d141e86c30677","reportUrl":"https://zaelcovsky.github.io/StroyremAutomation/153//#testresult/668d141e86c30677","status":"passed","time":{"start":1701048052670,"stop":1701048062320,"duration":9650}},{"uid":"3bdda282c14d1437","reportUrl":"https://zaelcovsky.github.io/StroyremAutomation/152//#testresult/3bdda282c14d1437","status":"passed","time":{"start":1700962011658,"stop":1700962022159,"duration":10501}},{"uid":"5da24276325f1a66","reportUrl":"https://zaelcovsky.github.io/StroyremAutomation/151//#testresult/5da24276325f1a66","status":"passed","time":{"start":1700875040171,"stop":1700875049393,"duration":9222}},{"uid":"5d7646c465596bd0","reportUrl":"https://zaelcovsky.github.io/StroyremAutomation/150//#testresult/5d7646c465596bd0","status":"passed","time":{"start":1700788764551,"stop":1700788774803,"duration":10252}},{"uid":"15ba5f50d2d8d2dd","reportUrl":"https://zaelcovsky.github.io/StroyremAutomation/149//#testresult/15ba5f50d2d8d2dd","status":"passed","time":{"start":1700702324762,"stop":1700702333929,"duration":9167}},{"uid":"7431336f296f8981","reportUrl":"https://zaelcovsky.github.io/StroyremAutomation/148//#testresult/7431336f296f8981","status":"passed","time":{"start":1700616062336,"stop":1700616071678,"duration":9342}},{"uid":"5b45df5dd6e5bd76","reportUrl":"https://zaelcovsky.github.io/StroyremAutomation/147//#testresult/5b45df5dd6e5bd76","status":"passed","time":{"start":1700529744889,"stop":1700529754788,"duration":9899}},{"uid":"38e67fe087859087","reportUrl":"https://zaelcovsky.github.io/StroyremAutomation/146//#testresult/38e67fe087859087","status":"passed","time":{"start":1700443232139,"stop":1700443241484,"duration":9345}}]},"tags":["smoke_test"]},"source":"6b610875fe280e16.json","parameterValues":["'https://stroyrem-nn.ru/catalog/shlifovalnye-mashiny'"]}